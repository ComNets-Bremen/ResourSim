//
// This program is free software: you can redistribute it and/or modify
// it under the terms of the GNU Lesser General Public License as published by
// the Free Software Foundation, either version 3 of the License, or
// (at your option) any later version.
// 
// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU Lesser General Public License for more details.
// 
// You should have received a copy of the GNU Lesser General Public License
// along with this program.  If not, see http://www.gnu.org/licenses/.
// 

// Module which represents the status of the battery

package eventsimulator;

simple SimplePercentageBattery
{
    parameters:
             
        // Percent per hour, pair of key:value, split by ","
        // User 1, mean
        //string chargePerHourArray = default("0:0.7886325140883892, 2:0.5672186582838029, 4:0.8888532482306654, 6:0.48302046676775323, 8:0.635353234130031, 10:0.5974182876316658, 12:0.5658613457028099, 14:0.6237666820647353, 16:0.5516758335436818, 18:0.5557711914640378, 20:0.6504231390657793, 22:0.49556517285077073, 24:0.5101197371971175, 26:0.5437008011664413, 28:0.5884112541093206, 30:0.5626085665164409, 32:0.6487895402555012, 34:0.5545208910852234, 36:0.4954766573560668, 38:0.5921028695200263, 40:0.49652105891946563, 42:0.5408457406809319, 44:0.5286265995112012, 46:0.5088843621411832, 48:0.5390389930262802, 50:0.6449459401494533, 52:0.5447544643338209, 54:0.5278448189213596, 56:0.564685699878184, 58:0.539709518472067, 60:0.48889612460308446, 62:0.5393902885776986, 64:0.47061636503422494, 66:0.4788696550964309, 68:0.43760717012333783, 70:0.43499652675234396, 72:0.4263224975624394, 74:0.37978325824303916, 76:0.372351874183787, 78:0.3656860577390018, 80:0.3334553204741027, 82:0.30089519459960645, 84:0.30629196524153574, 86:0.28643344416178174, 88:0.3412581336001909, 90:0.3630329264336742, 92:0.9539325502962849, 94:0.6430343454310989, 96:0.7624269946568548, 98:0.7756798258158086, 100:-0.0749999284744271");
		//string dischargePerHourArray = default("0:-0.46440317774936996, 2:-0.4793742982856692, 4:-0.6218744185961315, 6:-0.5632295929255583, 8:-1.2969289254268273, 10:-0.27235976041592086, 12:-0.5111014865746039, 14:-0.349265705778771, 16:-0.3281744292071118, 18:-0.3283821150883771, 20:-0.22296649048095726, 22:-0.6734202335293517, 24:-0.27745265947597986, 26:-0.24750399181473137, 28:-0.260020881965747, 30:-0.5144795968418487, 32:-0.23091656936267294, 34:-0.2254927749234097, 36:-0.24074569428120265, 38:-0.17144705161524743, 40:-0.19105274877347952, 42:-0.4959586482988203, 44:-0.24114974531476835, 46:-0.20643487338615008, 48:-0.18827769871082947, 50:-0.21240090933287942, 52:-0.18469779720067608, 54:-0.18867423492546034, 56:-0.3511519798145277, 58:-0.20899260402525235, 60:-0.2690560027436591, 62:-0.33980953729064006, 64:-0.30467093958621017, 66:-0.2868328990369553, 68:-0.20875294836471187, 70:-0.20523266909090343, 72:-0.25183665214431966, 74:-0.15052349685111027, 76:-0.14377890858307718, 78:-0.21740430136891575, 80:-0.22470368780556688, 82:-0.21611744526737678, 84:-0.25957174213072715, 86:-0.16863254019783025, 88:-0.18528226122912791, 90:-0.1833565482980421, 92:-0.1498632689154014, 94:-0.2913805549919053, 96:-0.18877413682165645, 98:-0.19936593029240884, 100:-0.18045797506976327");
		
		// User 1, median
		//string chargePerHourArray = default(" 0:0.7494169454147994, 2:0.5070422421878452, 4:0.521739215954494, 6:0.4353146707000858, 8:0.5142859901700687, 10:0.4390242986563026, 12:0.45569610746599, 14:0.423529638963586, 16:0.47060859148337625, 18:0.4557691313899506, 20:0.44186737163957657, 22:0.4137930171243104, 24:0.4444440205892001, 26:0.4444453451368446, 28:0.4500009119510551, 30:0.44722179571788256, 32:0.4444453451368446, 34:0.4615380213810924, 36:0.4337974957057249, 38:0.4090905189514228, 40:0.40449399626657534, 42:0.4000008106231601, 44:0.4186042519502931, 46:0.4090905189514228, 48:0.4210672536724721, 50:0.39999961853028226, 52:0.40000081062316006, 54:0.40449399626657756, 56:0.40224680739840757, 58:0.3999996185302779, 60:0.39999961853028226, 62:0.40224680739840746, 64:0.4000020027160822, 66:0.3978018184284454, 68:0.3956040183266506, 70:0.3999996185302779, 72:0.3956040183266528, 74:0.3789470070286843, 76:0.3749996423721355, 78:0.3636360168457071, 80:0.3495142297837418, 82:0.3050844548112018, 84:0.2857140132359128, 86:0.2553189054448327, 88:0.23376601082938317, 90:0.19889543069660887, 92:0.27274266590940066, 94:0.5626368260645698, 96:0.7826079492983697, 98:0.8571420397077383, 100:0.0");
		//string dischargePerHourArray = default("0:0.0, 2:-0.2999999932944751, 4:-0.3999999910593039, 6:-0.39999991655349587, 8:-0.23920533751809886, 10:-0.11960130395287977, 12:-0.1434262648996542, 14:-0.10564857446923563, 16:-0.1509598391545197, 18:-0.09327424626363896, 20:-0.11803285020296658, 22:-0.11028134493007187, 24:-0.10013918026576302, 26:-0.10374660794260637, 28:-0.09599990844726722, 30:-0.08665782821999571, 32:-0.09574487488320321, 34:-0.10892601531798206, 36:-0.1071467099662656, 38:-0.09278896388931065, 40:-0.07400744172962283, 42:-0.0801175601681494, 44:-0.08342992816889784, 46:-0.08727392765197682, 48:-0.08490995581678004, 50:-0.08581648822372225, 52:-0.0757894014057377, 54:-0.08802000214071931, 56:-0.07775370554584235, 58:-0.08780479431152441, 60:-0.07834827277614993, 62:-0.08530797551592752, 64:-0.07627111370280722, 66:-0.08372155211130783, 68:-0.08823520996990836, 70:-0.07643304812680553, 72:-0.07531692548919255, 74:-0.0599500260218216, 76:-0.07453536840135962, 78:-0.07676212945625877, 80:-0.0756301799742122, 82:-0.06805286515637393, 84:-0.07136157186934679, 86:-0.06660498885262402, 88:-0.08441357610250175, 90:-0.08562209029003601, 92:-0.08695643881092224, 94:-0.09207152344686804, 96:-0.08910882591021041, 98:-0.07964594174275533, 100:-0.09917345913973831");
		
		
		// User 2, mean
        //string chargePerHourArray = default("0:0.7237144794632464, 2:0.3305275151977148, 4:0.46864354470277636, 6:0.59091065396565, 8:0.6027972306672684, 10:0.523187478554578, 12:0.4954195640563725, 14:0.6184698882417612, 16:0.5708163799301826, 18:0.5860411936870152, 20:0.5811326457878216, 22:0.5709898886125183, 24:0.597540519798652, 26:0.6356911496800758, 28:0.6815194904681334, 30:0.6549660826675763, 32:0.6760239139333061, 34:0.6545735945077213, 36:0.5888003860842788, 38:0.6520692688036389, 40:0.6448617685310312, 42:0.6552144880263412, 44:0.6884891140973439, 46:0.6470920373142776, 48:0.6931891242397422, 50:0.6682057370713733, 52:0.7048316767932951, 54:0.6537224288842228, 56:0.6390041418347427, 58:0.6982517877113241, 60:0.6552953119752801, 62:0.6864633423065873, 64:0.6397374935413335, 66:0.6789119030140323, 68:0.7003876205041787, 70:0.6614582683323913, 72:0.6819033601305128, 74:0.6792215864131793, 76:0.672990912527363, 78:0.6881913450711247, 80:0.7420883348314423, 82:0.6178473315490292, 84:0.543368540648458, 86:0.47612236460226975, 88:0.4713332808900307, 90:0.37485922761139256, 92:0.3292832451954729, 94:0.31059249846297493, 96:0.2889699855190154, 98:0.24779620777769357, 100:0.0");
		//string dischargePerHourArray = default("0:-0.05641932762812415, 2:-0.09096226983443471, 4:-0.18945376394174104, 6:-0.16429845969646262, 8:-0.2292527693517735, 10:-0.17391652462795715, 12:-0.2138393023529837, 14:-0.1369050569989196, 16:-0.2051915188442339, 18:-0.1541096816645887, 20:-0.1715762137130023, 22:-0.20917043632306606, 24:-0.18351575167451073, 26:-0.13126284318770548, 28:-0.14867261117281022, 30:-0.2631687120773245, 32:-0.1582380795332466, 34:-0.1878637417076386, 36:-0.24554130688984596, 38:-0.19202730017272213, 40:-0.14288186675257097, 42:-0.16168302325107778, 44:-0.19657834439496746, 46:-0.20064556962250418, 48:-0.15227138893868278, 50:-0.22207199524987387, 52:-0.15127496689070408, 54:-0.17496347401131299, 56:-0.20599676078010729, 58:-0.2787536480037703, 60:-0.16004464944862234, 62:-0.1392657816890302, 64:-0.15544999459332196, 66:-0.1710312726004958, 68:-0.17383915022782, 70:-0.14603987612283012, 72:-0.13634907337511845, 74:-0.17168656330961618, 76:-0.1771513221615301, 78:-0.1936501169476861, 80:-0.16185584213559337, 82:-0.1419182203508733, 84:-0.2434802278128332, 86:-0.15926868781936412, 88:-0.17956797045493578, 90:-0.1879912751248752, 92:-0.24247695685112722, 94:-0.23423745813144778, 96:-0.13106852269523475, 98:-0.12622227876939138, 100:-0.17170332863926385");
		
		// User 2, median
		string chargePerHourArray = default("0:0.44999998994171786, 2:0.35643563559739616, 4:0.3599999248981463, 6:0.39560446044900777, 8:0.48648674745817305, 10:0.4799998998641761, 12:0.4931505820522357, 14:0.5217390215915219, 16:0.5142859901700687, 18:0.5624994635582048, 20:0.5538456256573109, 22:0.5901638113084428, 24:0.5901633716020526, 26:0.5999994277954201, 28:0.6101707280692272, 30:0.5999994277954201, 32:0.6000012159347402, 34:0.5999994277954201, 36:0.5901633716020526, 38:0.6101689096224612, 40:0.6206890632366415, 42:0.6000012159347402, 44:0.6101707280692272, 46:0.5999994277954201, 48:0.6154298956529344, 50:0.6154289864295512, 52:0.6101689096224577, 54:0.6206890632366381, 56:0.6101689096224036, 58:0.6545487317172255, 60:0.6101689096224645, 62:0.631578345047744, 64:0.6154308048763478, 66:0.6315783450478072, 68:0.6372174374143089, 70:0.6315783450478072, 72:0.6666660308837964, 74:0.6545448303222728, 76:0.6545448303222728, 78:0.6545487317171601, 80:0.5999994277954234, 82:0.5901633716019968, 84:0.5142852238246429, 86:0.4799995422362855, 88:0.4137927088244299, 90:0.3564374281628455, 92:0.313043179719334, 94:0.2950816858010247, 96:0.24161050783708057, 98:0.2093021259751454, 100:0.0");
		string dischargePerHourArray = default("0:0.0, 2:-0.007275666773512011, 4:-0.05882494706603691, 6:-0.07982262949192839, 8:-0.09486184024906828, 10:-0.08126409139913501, 12:-0.08285394743802024, 14:-0.0914880366780841, 16:-0.08305037864114465, 18:-0.08551073470761238, 20:-0.08035872736319355, 22:-0.07964606042456816, 24:-0.07964606042456816, 26:-0.09183664711154389, 28:-0.08988769482496226, 30:-0.07964617910638144, 32:-0.08591877247667114, 34:-0.08017809725551271, 36:-0.08633085292020433, 38:-0.0997228965864859, 40:-0.09195422212660265, 42:-0.08530797551593651, 44:-0.08530797551593651, 46:-0.08643574176442395, 48:-0.0878047943115249, 50:-0.08256872859569955, 52:-0.0918366471115444, 54:-0.08372134940568327, 56:-0.08530797551593604, 58:-0.09917345913973391, 60:-0.08612431977924642, 62:-0.0918366471115444, 64:-0.08706171294992673, 66:-0.09183719450114132, 68:-0.09782599366229622, 70:-0.08551060728675773, 72:-0.07964641647000842, 74:-0.07982254028320489, 76:-0.08430905308600797, 78:-0.08510680908851963, 80:-0.08200447760301824, 82:-0.07964594174275444, 84:-0.0805373159831038, 86:-0.0720778533390602, 88:-0.07287442442859393, 90:-0.06293700291560315, 92:-0.0703124329447754, 94:-0.059800607421470774, 96:-0.06509978344384051, 98:-0.059701435601534666, 100:-0.07273195272632385");
        volatile bool detailedStatus = default(false);						// Show more details for the battery
        @display("i=status/battery_neutral");
    gates:
        input in[];
        output out[];
}
